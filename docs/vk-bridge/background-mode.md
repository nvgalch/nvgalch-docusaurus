
# Работа VK Bridge в фоновом режиме

Когда пользователь переключается из [мини-приложения](mini-apps/overview) или [игры](games/overview) в другое приложение на мобильном устройстве или переходит на другую вкладку в десктопном браузере, платформа ВКонтакте переводит мини-приложение или игру в фоновый режим.

Платформа не отправляет события VK Bridge мини-приложениям и играм, которые находятся в фоновом режиме. Кроме того, она не обрабатывает поступающие от них вызовы событий. Это сделано для экономии заряда батареи и других ресурсов устройства.

Обработка событий начинается после возвращения приложений из фонового в рабочий режим.

## Особенности реализации

Для реализации описываемой функциональности используются разные подходы:

* Десктопная и мобильная версия сайта, а также мобильное приложение ВКонтакте для iOS приостанавливают обработку событий VK Bridge.

* Мобильное приложение для Android работает иначе: через 3 секунды после переключения в фоновый режим оно приостанавливает выполнение JavaScript-кода на стороне мини-приложения или игры.

## Как отследить переход и возврат из фонового режима

На мобильных устройствах сигналом о переключении в фоновый режим служит сообщение [`VKWebAppViewHide`](bridge/VKWebAppViewHide), а сигналом возвращения — событие [`VKWebAppViewRestore`](bridge/VKWebAppViewRestore). Создайте обработчики этих событий в коде мини-приложения или игры, чтобы выполнять необходимые действия.

При работе в десктопном или мобильном браузере мини-приложения и игры работают в iframe. Чтобы отслеживать их видимость пользователю, используйте событие [`document.visibilitychange`](https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API) и свойство [`document.hidden`](https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API). Они поддерживаются почти всеми современными браузерами.

## Материалы по теме

* [Событие VKWebAppViewHide](bridge/VKWebAppViewHide)

* [Событие VKWebAppViewRestore](bridge/VKWebAppViewRestore)

* [Обработка событий сворачивания и восстановления экрана игры](games/how-to/handle-minimize-and-restore-events)

* [Работа кеша приложений](mini-apps/development/cache)
